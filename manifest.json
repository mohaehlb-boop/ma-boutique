function activarNotifs() {
    if (Notification.permission !== "granted") {
        Notification.requestPermission().then(permission => {
            if (permission === "granted") {
                alert("Permiso concedido!");
            }
        });
    } else {
        alert("Ya tienes permiso para notificaciones.");
    }
}

function crearNotificacion(icon, message, sound) {
    if (Notification.permission === "granted") {
        const notif = new Notification("Notificación Personalizada", {
            body: message,
            icon: icon
        });
        
        // Para sonido: La API estándar no soporta sonido directo, pero puedes reproducir audio por separado
        if (sound) {
            const audio = new Audio(sound);
            audio.play();
        }
    } else {
        alert("Necesitas dar permiso primero.");
    }
}

function lanzarSpam() {
    const icon = document.getElementById('icon-url').value || 'logo.png'; // Default al logo
    const message = document.getElementById('message').value || 'Mensaje por defecto';
    const sound = document.getElementById('sound-url').value;
    const count = parseInt(document.getElementById('spam-count').value) || 1;
    
    let i = 0;
    const interval = setInterval(() => {
        if (i < count) {
            crearNotificacion(icon, message + ` (#${i+1})`, sound);
            i++;
        } else {
            clearInterval(interval);
        }
    }, 1000); // 1 segundo entre cada notif para no abusar
}
